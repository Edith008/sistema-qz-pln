
@model List<ExtranetQz.Areas.Kardex.Models.Movimiento>


<div style="overflow-x:auto; background-color:white; padding:20px; border-radius:10px; box-shadow: 0 0 10px rgba(0,0,0,0.1);">
   
    <h1>Movimientos de Inventario</h1>

    <table class="table table-bordered table-striped mb-0">
        <thead class="thead-dark">
        <tr>
            <th>Clase</th>
            <th>Código</th>
            <th>Descripción</th>
            <th>Cantidad</th>
            <th>Lote</th>
            <th>Fecha Entrada</th>
            <th>Costo</th>
            <th>Importe</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td>@(item.clase_movimiento?.ToString() ?? "-")</td>
                <td>@(item.codigo_material ?? 0)</td> @* o mostrar "-" si prefieres *@
                <td>@item.descripcion</td>
                <td>@(item.cantidad?.ToString() ?? "-")</td>
                <td>@item.lote</td>
                <td>@item.fecha_entrada?.ToString("yyyy-MM-dd") </td>
                <td>@(item.costo?.ToString("N2") )</td>
                <td>@(item.importe.HasValue ? $" {item.importe.Value:N2}" : "-")</td>
            </tr>
        }
    </tbody>
</table>

@{
    // Calcular totales
    var totalCantidad = Model.Sum(x => x.cantidad ?? 0);
    var totalImporte = Model.Sum(x => x.importe ?? 0m);
}

<h3>Totales</h3>
<table class="table table-bordered table-sm" style="width: 300px;">
    <thead>
        <tr>
            <th>Total Cantidad</th>
            <th>Total Importe</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>@totalCantidad</td>
            <td>@($" {totalImporte:N2}")</td>
        </tr>
    </tbody>
</table>
</div>

<br />

